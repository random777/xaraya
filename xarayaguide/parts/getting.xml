<?xml version="1.0" encoding="UTF-8"?>
<chapter id="download">
  <title>Getting Xaraya</title>

  <para>Xaraya is distributed in three versions, the "Core", the "Base", and
  "Full". The most current version of Xaraya is always available at <ulink
  url="http://www.xaraya.com">http://www.xaraya.com</ulink>. <itemizedlist>
      <listitem>
        <para>The "<firstterm>Xaraya Core</firstterm>" distribution is the
        absolute minimum installation of Xaraya.</para>
      </listitem>

      <listitem>
        <para>The "<firstterm>Xaraya Base</firstterm>" distribution is the
        <emphasis>recommended installation for most users</emphasis> because
        it includes all the files of the "Base" distribution, plus several
        useful modules.</para>
      </listitem>

      <listitem>
        <para>The "<firstterm>Xaraya Full</firstterm>" distribution contains
        more modules that further extend the functionality of Xaraya beyond
        the "Core" or "Base" installation.</para>
      </listitem>
    </itemizedlist></para>

  <para>Note that the Xaraya Full distribution is mere a convenience
  distribution. It is created as a snapshot from the current development tree.
  Use the Xaraya release module on the Xaraya website to get the latest module
  releases. Modules may be added to your site at any time after
  installation.</para>

  <para>The Xaraya Base, Core, and Full distributions are available in ZIP
  (Windows) &amp; TAR.GZ (Linux/OSX/BSD/Unix) format.</para>

  <para>Download the Xaraya Base distribution distribution from the Downloads
  section of <ulink
  url="http://www.xaraya.com">http://www.xaraya.com</ulink>.</para>

  <para>This document shows how to install &amp; configure the Xaraya Base
  distribution on your website. Later in this document, you are taught how to
  integrate additional modules into your Xaraya Base installation.</para>

  <itemizedlist>
    <listitem>
      <para>Using the appropriate unarchiving utility, unarchive the Xaraya
      Base distribution into a temporary directory. Consult the manual for the
      unarchiving utility if you're unfamiliar with how to extract archives.
      For example, on Linux:</para>

      <itemizedlist>
        <listitem>
          <para>"<userinput>mkdir /tmp/xar</userinput>"</para>
        </listitem>

        <listitem>
          <para>"<userinput>cd /tmp/xar</userinput>"</para>
        </listitem>

        <listitem>
          <para>"<userinput>tar -xzvf
          &lt;/path/to/XarayaBase.tar.gz&gt;</userinput>"</para>
        </listitem>
      </itemizedlist>
    </listitem>

    <listitem>
      <para>Rename the configuration file in /var/ from config.system.php.dist
      to config.system.php.</para>
    </listitem>

    <listitem>
      <para>If you did not unzip or untar the distribution on your server,
      then move all the files now to your webserver (see below).</para>
    </listitem>

    <listitem>
      <para>Run the installation wizard (see next part)</para>

      <itemizedlist>
        <listitem>
          <para>Go to the install script at /yourinstalldir/install.php</para>
        </listitem>

        <listitem>
          <para>Follow the instructions as explained in the Xaraya
          installation guide which you can read online at <ulink
          url="http://www.xaraya.com/index.php/documentation/97">http://www.xaraya.com/index.php/documentation/97</ulink></para>
        </listitem>
      </itemizedlist>
    </listitem>
  </itemizedlist>

  <sect1 id="upload">
    <title>Getting Xaraya onto the webserver</title>

    <para>Move Xaraya Base from the temporary directory into your
    <command>&lt;webdir&gt;</command> (or a sub-directory of your
    &lt;webdir&gt;) to make Xaraya accessible to the web.</para>

    <para>For example, under Linux, assuming that you wish to install Xaraya
    into a sub-directory of <command>&lt;webdir&gt;</command> called
    "<filename>xaraya</filename>", that your <command>&lt;webdir&gt;</command>
    is "<filename>/var/www/html</filename>" (as it is on modern Red Hat
    systems -- users of other operating systems should check their manual to
    find the path to the correct <command>&lt;xarroot&gt;</command> location
    and directory), and that you have extracted the XarayaBase archive to a
    temporary directory called "<filename>/tmp/xar</filename>":</para>

    <itemizedlist>
      <listitem>
        <para>"<userinput>cd /tmp/xar/html</userinput>"</para>
      </listitem>

      <listitem>
        <para>"<userinput>mkdir &lt;webdir&gt;/xaraya</userinput>" (or the
        correct <command>&lt;xarroot&gt;</command> for your
        installation)</para>
      </listitem>

      <listitem>
        <para>"<userinput>cp -r /tmp/xar/html/*
        &lt;webdir&gt;/xaraya</userinput>" (or the correct
        <command>&lt;xarroot&gt;</command> for your installation)</para>
      </listitem>
    </itemizedlist>

    <para>If you need to UPLOAD your site, ensure that the files are
    transferred in ASCII or Text format.</para>

    <para>It may be necessary to set ownership &amp; permissions for the
    directory where Xaraya is installed.</para>
  </sect1>

  <sect1 id="permissions">
    <title>Setting Permissions</title>

    <para>Now that you've installed the files in the correct place on your
    webserver, you need to ensure that all the files can be read by the web
    server. This should be the default situation, but if it isn't then consult
    your operating system manual for information about changing that. The best
    route is to change the group of the file and directories to the same group
    used by the web server (NOTE: This presents a reduced security risk).
    However the webserver user ID should not own the files, but the
    webserver's group ID can have group ownership. This gives the advantage
    that not everyone needs to have read access to the files - just those in
    the webserver group. It is best if the webserver user ID does not own the
    files itself because then the webserver could change the permissions of
    the files without your knowledge and that could make it easier to hack the
    site. Under Red Hat Linux, check the "User" and "Group" settings in
    <filename>/etc/httpd/conf/httpd.conf</filename> to determine the user
    &amp; group values. For example, under Linux and assuming that your
    user/group that is used by the webserver is user: "web" and group:
    "apache":<itemizedlist>
        <listitem>
          <para>"<userinput>chgrp -R apache
          &lt;xarroot&gt;</userinput>"</para>
        </listitem>
      </itemizedlist></para>

    <para>There is a file and some directories to which the web server must
    have 'write' access. They are:<itemizedlist>
        <listitem>
          <para>"<filename>&lt;xarroot&gt;/var/config.system.php</filename>":
          Set with "<userinput>chmod 660
          &lt;xarroot&gt;/var/config.system.php</userinput>"</para>
        </listitem>

        <listitem>
          <para>"<filename>&lt;xarroot&gt;/var/cache/templates</filename>":
          Set with "<userinput>chmod -R 770
          &lt;xarroot&gt;/var/cache/templates</userinput>"</para>
        </listitem>

        <listitem>
          <para>"<filename>&lt;xarroot&gt;/var/cache/rss</filename>": Set with
          "<userinput>chmod -R 770
          &lt;xarroot&gt;/var/cache/rss</userinput>"</para>
        </listitem>

        <listitem>
          <para>"<filename>&lt;xarroot&gt;/var/cache/adodb</filename>": Set
          with "<userinput>chmod -R 770
          &lt;xarroot&gt;/var/cache/adodb</userinput>"</para>
        </listitem>
      </itemizedlist></para>

    <para>It is likely that these permissions are correct already because the
    installer checks them for you.</para>
  </sect1>
</chapter>