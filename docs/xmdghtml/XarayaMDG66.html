<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE>Registering Hooks</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.2  (Linux)">
	<META NAME="CREATED" CONTENT="20040815;10452000">
	<META NAME="CHANGEDBY" CONTENT="Scot Gardner">
	<META NAME="CHANGED" CONTENT="20040815;10452000">
	<STYLE>
	<!--
		@page { size: 8.5in 11in; margin-left: 1.25in; margin-right: 1.25in; margin-top: 0.5in; margin-bottom: 0.5in }
		P { margin-bottom: 0.08in; direction: ltr; color: #000000; widows: 2; orphans: 2 }
		P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
		P.cjk { font-family: "Times New Roman", serif; font-size: 12pt; so-language:  }
		P.ctl { font-family: "Times New Roman", serif; font-size: 10pt }
		H1 { margin-left: -0.25in; margin-bottom: 0.04in; direction: ltr; color: #000000; widows: 2; orphans: 2 }
		H1.western { font-family: "Arial", sans-serif; font-size: 16pt; so-language: en-US }
		H1.cjk { font-family: "Times New Roman", serif; font-size: 16pt; so-language:  }
		H1.ctl { font-family: "Times New Roman", serif; font-size: 10pt; font-weight: medium }
		A:link { color: #000000 }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" TEXT="#000000" LINK="#000000" DIR="LTR">
<DIV TYPE=HEADER>
	<P ALIGN=RIGHT STYLE="margin-bottom: 0in">Scot Gardner <SDFIELD TYPE=PAGE SUBTYPE=RANDOM FORMAT=PAGE></SDFIELD></P>
	<P STYLE="margin-bottom: 0.3in"><BR>
	</P>
</DIV>
<UL>
	<LI><H1 CLASS="western" STYLE="page-break-inside: auto">Registering
	Hooks</H1>
</UL>
<P CLASS="western" STYLE="margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">	Once your module has hook-capable functions in
place they need to be registered on initialization of the module so
that the administrator can configure their applicability, and other
modules can access them through the <FONT SIZE=2><FONT FACE="Courier New, monospace">xarModCallHooks()</FONT></FONT>
function. This is carried out through use of the <FONT SIZE=2><FONT FACE="Courier New, monospace">xarModRegisterHook()</FONT></FONT>
function. This function should be placed within the <FONT SIZE=2><FONT FACE="Courier New, monospace"><I>modname</I>_init()</FONT></FONT>
function of your module and given appropriate parameters to register
the relevant hook-capable module functions within your module as
hooks. </FONT>
</P>
<P CLASS="western" STYLE="margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">The <FONT SIZE=2><FONT FACE="Courier New, monospace">xarModRegisterHook()</FONT></FONT>
function takes a number of parameters, which are explained below: </FONT>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
hookobject 
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">The object for which the hook is to be
registered - currently either <I>category</I>, or <I>item</I>, as
described above </FONT>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
hookaction 
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">The action for which the hook is to be
registered - currently one of <I>create</I>, <I>delete</I>,
<I>transform</I>, or <I>display</I> </FONT>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
hookarea 
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">The area that the hook function covers -
currently either <B><I>GUI</I></B> (for functions that are in
<FONT SIZE=2><FONT FACE="Courier New, monospace">xaruser.php</FONT></FONT>
and <FONT SIZE=2><FONT FACE="Courier New, monospace">xaradmin.php</FONT></FONT>)
or <B><I>API</I> </B>(for functions that are in <FONT SIZE=2><FONT FACE="Courier New, monospace">xaruserapi.php</FONT></FONT>
and <FONT SIZE=2><FONT FACE="Courier New, monospace">xaradminapi.php</FONT></FONT>)
</FONT>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
hookmodule 
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
The name of the module in which the hook function exists - normally
the name of the module calling this function 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
hooktype 
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">The type of the hook function - currently
either <FONT SIZE=2><FONT FACE="Courier New, monospace">user</FONT></FONT>
or <FONT SIZE=2><FONT FACE="Courier New, monospace">admin</FONT></FONT>
</FONT>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
hookfunc 
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
The name of the hook function 
</P>
<P CLASS="western" STYLE="margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">The <FONT SIZE=2><FONT FACE="Courier New, monospace">xarModRegisterHook()</FONT></FONT>
function returns <I>true</I> if the registration was successful, and
<I>false</I> if the registration is unsuccessful. </FONT>
</P>
<P CLASS="western" STYLE="margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
<FONT COLOR="#000000">As an example of registering hooks, if you were
developing the 'globalid' utility module (which gives every piece of
content in Xaraya a separate ID) and had a <FONT SIZE=2><FONT FACE="Courier New, monospace">globalid_admin_create()</FONT></FONT>
function which created an entry in the global ID table for this
particular piece of content then you would register this as a
creation hook. To do this you would use the following lines within
<FONT SIZE=2><FONT FACE="Courier New, monospace">globalid_init()</FONT></FONT>:
</FONT>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<FONT SIZE=2 STYLE="font-size: 9pt"><FONT FACE="Courier New, monospace"><B><FONT COLOR="#000000">if</FONT></B><FONT COLOR="#008080">
</FONT><FONT COLOR="#000000">(!xarModRegisterHook(</FONT><FONT COLOR="#008000">'item'</FONT><FONT COLOR="#000000">,<BR></FONT><FONT COLOR="#008080">
                      </FONT><FONT COLOR="#008000">'create'</FONT><FONT COLOR="#000000">,<BR></FONT><FONT COLOR="#008080">
                      </FONT><FONT COLOR="#008000">'API'</FONT><FONT COLOR="#000000">,<BR></FONT><FONT COLOR="#008080">
                      </FONT><FONT COLOR="#008000">'globalid'</FONT><FONT COLOR="#000000">,<BR></FONT><FONT COLOR="#008080">
                      </FONT><FONT COLOR="#008000">'admin'</FONT><FONT COLOR="#000000">,<BR></FONT><FONT COLOR="#008080">
                      </FONT><FONT COLOR="#008000">'create)) {</FONT><FONT COLOR="#000000"><BR></FONT><FONT COLOR="#008080">
   </FONT><FONT COLOR="#008000">return false;</FONT><FONT COLOR="#000000"><BR></FONT><FONT COLOR="#008000">}<BR></FONT></FONT></FONT><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
          
</P>
<P CLASS="western" STYLE="margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
	Which would register this hook to be called every time a
hook-enabled module someone creates an item (a similar but separate
call would be needed to register this hook for the creation of
categories as well). 
</P>
<P CLASS="western" STYLE="margin-top: 0.07in; margin-bottom: 0.07in; page-break-inside: auto">
	The Ratings module that comes with the core Xaraya distribution has
detailed comments on registering hooks within a utility module. 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<BR>
</P>
<DIV TYPE=FOOTER>
	<P ALIGN=CENTER STYLE="margin-top: 0.29in; margin-bottom: 0in"><FONT SIZE=2>All
	boldface terms are defined in the Glossary beginning on page 42</FONT></P>
</DIV>
</BODY>
</HTML>