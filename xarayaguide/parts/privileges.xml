<?xml version="1.0" encoding="UTF-8"?>
<chapter id="privileges">
  <title>Privileges: Building Blocks for Site Access</title>

  <para>Through the use of <firstterm>privileges</firstterm> and
  <firstterm>roles</firstterm>, Xaraya provides very fine-grained access
  control for site users on either a Group or individual User level. Many of
  the concepts behind user roles and privileges are based in Object Oriented
  Programming.</para>

  <para>Privileges are individual access levels (example: Allow Comments on
  Articles; example: Do not allow access to administration options) that can
  be used as building blocks and collected together into <firstterm>Compound
  Privileges</firstterm>.</para>

  <para>Any combination of <firstterm>Individual Privileges</firstterm> and
  Compound Privileges can be placed into <firstterm>Site Roles</firstterm>.
  Site Roles are built from existing Individual Privileges or Compound
  Privileges. Privileges are made from <firstterm>Access Levels</firstterm>.
  Access Levels are the basis for the access control system in Xaraya. Users
  are placed into Roles and have permission to do whatever the Privileges
  associated with that Role permit them to do on the site.</para>

  <sect1 id="usingprivs">
    <title>How to use Privileges</title>

    <sect2>
      <title>Terminology</title>

      <para>Because Xaraya's Roles &amp; Privileges are considerably different
      from user rights features in other Content Management Systems, let's
      first define some terminology that will be used in this section of the
      Guide.</para>

      <itemizedlist>
        <listitem>
          <para>Role: A uniquely-named set of one or more users. A Role can
          correspond to a User or Group of users.</para>
        </listitem>

        <listitem>
          <para>Privilege: An object that can grant or deny a particular kind
          of access to a module component. For example, the ability to view
          the Login Block is a privilege, the ability to edit an Article is a
          privilege, and the ability to post a comment is a privilege.</para>
        </listitem>

        <listitem>
          <para>Module: A functional unit of a Xaraya site -- a module of the
          Xaraya system (articles, polls, messages, ratings, comments,
          headlines, etc).</para>
        </listitem>

        <listitem>
          <para>Component: A group of resources that can be protected with the
          security system. Components are defined by the modules in which they
          reside. Components can be VISUALLY DISCRETE resources, such as
          blocks or web pages, or they can be FUNCTIONALITY resources, such as
          the ability to add or edit items. Components can be defined in any
          way the module developer wishes, for example, "adding an article",
          "viewing a link", "displaying a menu", etc, could all be designed as
          components by the module author. Some components coincide with
          concepts known outside the security system, such as blocks, but this
          is not necessarily the case.</para>
        </listitem>

        <listitem>
          <para>Instance: A specific instance of a component. For example, the
          login block on the front page of a Xaraya site is an instance of the
          Block component in the Roles module. Another example of a
          'Component' and an 'Instance': the Component might be menus in a
          module while the Instance would be "menu number 7". Think of
          Components as classes of Privilege objects and Instances as specific
          examples of those objects.</para>
        </listitem>

        <listitem>
          <para>Mask: A special kind of privilege used to check other
          privileges. Each mask protects one or more components. When a mask
          is encountered, it is checked against the user's privileges to see
          whether access to the component in question is permitted.</para>
        </listitem>

        <listitem>
          <para>Access level: The type of access granted by a privilege or
          required by a mask. An access level is the right to access a
          resource. Security levels in Xaraya go from 0 (no access) to 800
          (admin or full access).</para>
        </listitem>

        <listitem>
          <para>Realms: Realms are a way of creating different security views
          of the same Xaraya site. They are an "extra dimension" used to make
          finely-grained security schemes.</para>

          <para>For extended explanation of the terminology, read RFC 030 on
          the security system in Xaraya (<ulink
          url="http://www.xaraya.com/documentation/rfcs/rfc0030.html">http://www.xaraya.com/documentation/rfcs/rfc0030.html</ulink>)</para>
        </listitem>
      </itemizedlist>

      <para>EXAMPLE: If you would like anonymous users to be able to view
      items on your website (but be unable to post comments), add the
      following privilege:</para>

      <itemizedlist>
        <listitem>
          <para><command>Admin-&gt;Privileges-&gt;Add
          Privilege</command>:</para>

          <itemizedlist>
            <listitem>
              <para>Click "<guibutton>with rights</guibutton>" radio button --
              the panel will reload with additional options</para>
            </listitem>

            <listitem>
              <para>Name: ViewTopics</para>
            </listitem>

            <listitem>
              <para>Member of: CasualAccess (If you DO NOT select an existing
              privilege of which the new privilege is a member, the new
              privilege will appear in the top level. If you select a Member
              from the drop-down list, the privilege appears in TWO
              places:</para>

              <orderedlist>
                <listitem>
                  <para>Top level</para>
                </listitem>

                <listitem>
                  <para>Under the privilege selected from the drop-down
                  list</para>
                </listitem>
              </orderedlist>

              <para>This configuration is in place so the privilege may be
              re-used. It also prevents the privilege from being
              "lost".)</para>
            </listitem>

            <listitem>
              <para>Realm: <userinput>All</userinput></para>
            </listitem>

            <listitem>
              <para>Module: <userinput>Articles</userinput></para>
            </listitem>

            <listitem>
              <para>Component: <userinput>All</userinput></para>
            </listitem>

            <listitem>
              <para>Level: Set to "<userinput>Read</userinput>"</para>
            </listitem>

            <listitem>
              <para>Click "<guibutton>Add</guibutton>"</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </sect2>

    <sect2>
      <title>Standard privileges</title>

      <para>When you install the community site setup of Xaraya, then you will
      already have a set of several privileges in place. It is advised to keep
      this set of privileges, and only add new ones to it.</para>
    </sect2>

    <sect2>
      <title>Explanation of privilege levels</title>

      <para>The levels of Privileges add up. So giving the highest admin level
      to a role, will automatically cause this role to be able to have read
      access as well.</para>

      <itemizedlist>
        <listitem>
          <para>None: User has no access to this item.</para>
        </listitem>

        <listitem>
          <para>Overview: User can see the SUMMARY of an article, or be shown
          a link but not the article/link itself.</para>
        </listitem>

        <listitem>
          <para>Read: User has READ ONLY access to this item.</para>
        </listitem>

        <listitem>
          <para>Comment: User can POST COMMENTS about this item.</para>
        </listitem>

        <listitem>
          <para>Moderate: Used for functions that require moderation, such as
          Comments, or in Forums. An example is granting a user moderation
          abilities within a message board but nowhere else on the
          site.</para>
        </listitem>

        <listitem>
          <para>Edit: "Edit" is a permission for users that may not be
          permitted to Add, but are allowed to Edit. Example: An Article
          Administrator that is permitted to edit stories, but is not
          permitted to post Articles.</para>
        </listitem>

        <listitem>
          <para>Add: "Add" grants permission to either add or approve
          content.</para>
        </listitem>

        <listitem>
          <para>Delete: "Delete" is the opposite of "Add". You are granting
          someone the ability to remove content.</para>
        </listitem>

        <listitem>
          <para>Admin: User has ADMINISTRATOR ACCESS to this item.</para>
        </listitem>
      </itemizedlist>
    </sect2>

    <sect2>
      <title>Container Types</title>

      <itemizedlist>
        <listitem>
          <para>Empty: It's possible to create a Privilege which has no access
          rights itself, but is just a container for others. Selecting EMPTY
          can to create a 'master container' for other Privileges. ADVANCED:
          It is possible for a 'master container' to contain access rights.
          We'll explore that more later. OTTO</para>
        </listitem>

        <listitem>
          <para>With Rights: This Privilege, unlike an Empty Privilege, has
          access rights.</para>
        </listitem>
      </itemizedlist>
    </sect2>

    <sect2>
      <title>EXAMPLE: Read-access for Anonymous users</title>

      <para>To grant Anonymous users read access to the site, add the
      following privilege:</para>

      <itemizedlist>
        <listitem>
          <para>Go to <command>Admin-&gt;Privileges</command>.</para>
        </listitem>

        <listitem>
          <para>Click "<guibutton>CasualAccess</guibutton>".</para>
        </listitem>

        <listitem>
          <para>Under the Privilege drop-down list below Add Privilege To
          '<guibutton>CasualAccess</guibutton>', select
          "<guibutton>ReadAccess</guibutton>"</para>
        </listitem>

        <listitem>
          <para>Click "<guibutton>Add</guibutton>" to save changes.</para>
        </listitem>
      </itemizedlist>

      <para>Unregistered and Anonymous users now have read access to the
      site.</para>
    </sect2>

    <sect2>
      <title>Allow Registered Users to modify their account</title>

      <para>To allow Registered users to change their theme, post comments,
      and submit articles, add the following privilege:</para>

      <itemizedlist>
        <listitem>
          <para>Go to <command>Admin-&gt;Privileges-&gt;Add
          Privilege</command></para>
        </listitem>

        <listitem>
          <para>Admin-&gt;Privileges-&gt;View Privileges-&gt;View
          Topics:</para>

          <para>If you would like anonymous users to be able to post comments,
          change the "<guibutton>Level</guibutton>" field to
          "<guibutton>Comment</guibutton>" and click
          "<guibutton>Update</guibutton>" to save changes.</para>
        </listitem>
      </itemizedlist>
    </sect2>
  </sect1>
</chapter>