<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="rfc2629.xsl"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<!-- <?rfc private='my private memo'?>  Produce a private memo rather than a Xaraya-standard -->
<?rfc toc="yes"?>
<rfc number="0015" category="info">
	<front>
		<title>Postcalendar</title>
		<author initials="R." surname="Raymond" fullname="Roger Raymond">
			<organization>Xaraya Development Group</organization>
			<address>
				<email/>
				<uri>http://www.xaraya.com</uri>
			</address>
		</author>
		<date month="April" year="2002"/>
		<!-- Initiating team for this RFC -->
		<workgroup>Project Management Committee</workgroup>
		<!-- List keywords for the RFC here -->
		<keyword>rfc</keyword>
		<!-- The abstract summarizes in one or two paragraphs the content of the RFC -->
		<abstract>
			<t>The contents of this RFC contain the literal content of the old plain
	text version of RFC-0015</t>
			<t>When time is a less scarcer good, someone might convert the plain text
	into structured XML so we can benefit from it.
      </t>
		</abstract>
	</front>
	<!-- The middle section is used for the actual content of the RFC -->
	<middle>
		<!-- Introduction is mandatory -->
		<section title="Introduction">
			<t>
			All ?xxx numbers refer to the basic documents in section 7.
			</t>
			<t>
			 We read through the articles on http://www.bahraini.tv and http://www.alyousif.tv, bahraini.tv's forum threads, 
			 and feature requests on sourceforge.
			</t>
			<t>
			The following RFC is a first summary and contains some solution proposals either compiled from feature requests 
			received through the forums and sf tracker or other general comments.
			</t>
		</section>
		<section title="List of requirements for PostCalendar">
			<t>
			Following is a list of requirements broadly grouped into categories.
			</t>
			<t>
			Same as PostNuke .71+
			</t>
		</section>
		<section title="Solution proposals - database tables">
			<t>
			The following is the current table structure, which I honestly feel needs to go through a redesign.
			</t>
			<t>
			<artwork>
    CREATE TABLE $prefix_postcalendar_events (
        pc_eid bigint(20) NOT NULL auto_increment,
        pc_aid varchar(30) NOT NULL default '',
        pc_title varchar(150) default NULL,
        pc_time datetime default NULL,
        pc_hometext text,
        pc_comments int(11) default '0',
        pc_counter mediumint(8) unsigned default NULL,
        pc_topic int(3) NOT NULL default '1',
        pc_informant varchar(20) NOT NULL default '',
        pc_eventDate date NOT NULL default '0000-00-00',
        pc_endDate date NOT NULL default '0000-00-00',
        pc_recurrtype int(1) NOT NULL default '0',
        pc_recurrspec int(3) default NULL,
        pc_startTime time default NULL,
        pc_endTime time default NULL,
        pc_alldayevent int(1) NOT NULL default '0',
        pc_barcolor char(1) default NULL,
        pc_location varchar(50) default NULL,
        pc_conttel varchar(12) default NULL,
        pc_contname varchar(50) default NULL,
        pc_contemail varchar(50) default NULL,
        pc_website varchar(50) default '',
        pc_fee varchar(50) default NULL,
        pc_recurrfreq int(3) NOT NULL default '0',
        pc_eventstatus int(3) NOT NULL default '0',
        PRIMARY KEY  (pc_eid)
    ) TYPE=MyISAM;
                </artwork>
                </t> 
                <t>
                Proposed changes are :
                </t> 
                <t>
                + Store all dates as UNIX Timestamps.
                </t> 
                <t>
                + change the table design.
                </t> 
                <t>
                + add new columns for better repeating events handling (duration, etc.)
                </t> 
                <t>
                + Add a new $prefix_postcalendar_user_settings table to store a user's personal calendar settings.
               </t> 
                <t>
                + Add a new $prefix_postcalendar_event_type table to store the categories/event type descriptions can this use 
                any core functionality? topics/section?
		   </t>
		</section>
		<section title="Solution proposals - functions">
			<t>
			Integrate a better date checker in pcAPI.
                    </t> 
                    <t>
                    See http://www.phpinsider.com/php/code/Date_Calc/
                </t> 
                <t>
                Integrate a template system for calendar display?
                </t> 
                <t>
                See http://www.phpinsider.com/php/code/Smarty/
                </t> 
                <t>
                Creation of a more robust pcAPI that can be used in other modules.
		   </t>
		</section>
		<section title="Relationship to other areas">
			<t>
		       Add ability to submit event as a story Integrate with user settings for calendar prefs
			</t>
		</section>
		<section title="Code that will need to be rewritten">
			<t>
			Event edit/submit form to be more intuitive and also support a more robust repeating events system
                </t> 
                <t>
                SQL routines for SELECT,UPDATE,INSERT,DELETE in order to accomodate the new repeating events functionality.
                </t> 
                <t>
                Display routines.
		   </t>
		</section>
		<section title="Basic documents for this RFC">
			<t>
		       [1]
			</t>
		</section>
		<section title="Tools that need to be created from scratch">
			<t>
			</t>
		</section>
		<section title="Retractions">
			<t>
			We list features that were considered but rejected for this API below.
			</t>
		</section>
		<section title="Changelog">
			<t>
			1.0 (April 5, 2002)
                    </t> 
                    <t>
                    Initial Version
			</t>
		</section>
	</middle>
</rfc>
