<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE>Variable handling</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.2  (Linux)">
	<META NAME="CREATED" CONTENT="20040815;10450600">
	<META NAME="CHANGEDBY" CONTENT="Scot Gardner">
	<META NAME="CHANGED" CONTENT="20040815;10450600">
	<STYLE>
	<!--
		@page { size: 8.5in 11in; margin-left: 1.25in; margin-right: 1.25in; margin-top: 0.5in; margin-bottom: 0.5in }
		P { margin-bottom: 0.08in; direction: ltr; color: #000000; widows: 2; orphans: 2 }
		P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
		P.cjk { font-family: "Times New Roman", serif; font-size: 12pt; so-language:  }
		P.ctl { font-family: "Times New Roman", serif; font-size: 10pt }
		H1 { margin-left: -0.25in; margin-bottom: 0.04in; direction: ltr; color: #000000; widows: 2; orphans: 2 }
		H1.western { font-family: "Arial", sans-serif; font-size: 16pt; so-language: en-US }
		H1.cjk { font-family: "Times New Roman", serif; font-size: 16pt; so-language:  }
		H1.ctl { font-family: "Times New Roman", serif; font-size: 10pt; font-weight: medium }
		A:link { color: #000000 }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" TEXT="#000000" LINK="#000000" DIR="LTR">
<DIV TYPE=HEADER>
	<P ALIGN=RIGHT STYLE="margin-bottom: 0in">Scot Gardner <SDFIELD TYPE=PAGE SUBTYPE=RANDOM FORMAT=PAGE></SDFIELD></P>
	<P STYLE="margin-bottom: 0.3in"><BR>
	</P>
</DIV>
<UL>
	<LI><H1 CLASS="western" STYLE="page-break-inside: auto">Variable
	handling</H1>
</UL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
	Variables are loaded through xarVarFetch calls in order to be
processed, checked for validity, as well as proper handling on unset
vars, etc.  Instead of relying on $_POST or $_GET calls throughout
your module and then cleaning the input, Xaraya has a very robust way
of handling the variable.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
An example call would be:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
    if (!xarVarFetch('itemsperpage', 'int', $itemsperpage, 10,
XARVAR_NOT_REQUIRED)) return;</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<BR>
</P>
<UL>
	<UL>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
		Fetches the $name variable from input variables and validates it by
		applying the $validation rules.</P>
		<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
		</P>
	</UL>
</UL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
1st try to use the variable provided, if this is not set (Or the
XARVAR_DONT_REUSE flag is used) then it try to get the variable from
the input (POST/GET methods for now)  Then tries to validate the
variable through xarVarValidate.  
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
After the call the $value parameter passed by reference is set to the
variable value converted to the proper type according to the
validation applied.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
The $defaultValue provides a default value that is returned when the
variable is not present or doesn't validate correctly.</P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
	</P>
</UL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 The $flag parameter is a bitmask between the following constants:
XARVAR_GET_OR_POST, XARVAR_GET_ONLY,</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 XARVAR_POST_ONLY, XARVAR_NOT_REQUIRED.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 You can force to get the variable only from GET parameters or POST
parameters by setting the $flag parameter to one of XARVAR_GET_ONLY
or XARVAR_POST_ONLY.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 You can force xarVarFetch not to reuse the variable by setting the
$flag parameter to XARVAR_DON_REUSE.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 By default $flag is XARVAR_GET_OR_POST which means that xarVarFetch
will lookup both GET and POST parameters and that if the variable is
not present or doesn't validate correctly an exception will be
raised.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
 The $prep flag will prepare $value by passing it to one of the
following:</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
  XARVAR_PREP_FOR_NOTHING:    no prep (default)</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
  XARVAR_PREP_FOR_DISPLAY:    xarVarPrepForDisplay($value)</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
  XARVAR_PREP_FOR_HTML:       xarVarPrepHTMLDisplay($value)</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
  XARVAR_PREP_TRIM:           trim($value)</P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: auto">
	</P>
</UL>
<DIV TYPE=FOOTER>
	<P ALIGN=CENTER STYLE="margin-top: 0.29in; margin-bottom: 0in"><FONT SIZE=2>All
	boldface terms are defined in the Glossary beginning on page 42</FONT></P>
</DIV>
</BODY>
</HTML>