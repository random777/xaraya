<?xml version="1.0" encoding="UTF-8"?>
<chapter id="publicationtypes">
  <title>Publication Types</title>

  <para>Xaraya's Articles module can manage 'articles' of different types at
  the same time, for instance news articles, longer documents in different
  sections, frequently asked questions, and so on.</para>

  <para>These types are called '<firstterm>Publication Types</firstterm>', and
  each type of article can utilize a different set of data fields, with a
  different meaning for each data field. For example, the 'summary' field
  could be used for an Introduction in News articles, for providing some
  Details about a question in FAQs, or not be used at all for Section
  documents.</para>

  <para>There is a specific menu for management of Publication Types which
  allows you to change the description that appears in navigation menus,
  enable &amp; disable dynamic data fields, or change their meaning for a
  particular type, or create or delete publication types according to your
  needs.</para>

  <para>Each publication type also has its own templates, so that the look
  &amp; feel of each publication type can be customized. Until you define
  templates for the new publication type, Xaraya will display items using
  default templates (and a warning).</para>

  <para>A default set of publication types and templates (corresponding to the
  old News, Sections and FAQs modules of PostNuke or PHP-Nuke) is included as
  part of the installation.</para>

  <para>Want to display recipes on your site? Create a new Publication Type,
  and Xaraya can do that.</para>

  <sect1 id="pubsintro">
    <title>Introduction to Publication Types</title>

    <para>A good strategy for configuration of Categories is to create a
    top-level Category called &lt;sitename&gt;, and below that group all the
    sub-categories for the site. This
    "<userinput>&lt;sitename&gt;</userinput>" top-level category could be
    considered to be the <emphasis><firstterm>ROOT
    CATEGORY</firstterm></emphasis>, with additional Categories placed below
    the ROOT CATEGORY. For example, if the site is
    "<userinput>MySite.COM</userinput>":</para>

    <para><literallayout>    MySite.COM (root category)
    |
    |---World News (sub-category)
    |   |
    |   |---North American News (sub-sub-category)
    |   |   |
    |   |   |---United States News (sub-sub-sub-category)
    |   |       |
    |   |       |---Ohio News (sub-sub-sub-sub-category)
    |   |       |
    |   |       |---Nevada News (sub-sub-sub-sub-category)
    |   |       |
    |   |       |---etc...
    |   |
    |   |---Asian News (sub-sub-category)
    |       |
    |       |---China News (sub-sub-sub-category)
    |       |
    |       |---Japan News (sub-sub-sub-category)
    |       |
    |       |---etc...
    |
    |---Sports News (sub-category)
    |
    |---Music News (sub-category)
    |
    |---Entertainment News (sub-category)
    |
    |---etc...</literallayout></para>

    <para><emphasis>PUBLICATION TYPES CAN BE USED ONLY BY ARTICLES. CATEGORIES
    CAN BE USED BY ALL MODULES.</emphasis> A module that cannot fit into a
    Publication Type can still use Categories if they want. Plus 'Site News'
    could be a Category; you can put news articles in there... But you might
    ALSO have a 'Software News' Category.</para>

    <itemizedlist>
      <listitem>
        <para><command>Admin-&gt;Articles-&gt;Publication
        Types</command>:</para>

        <itemizedlist>
          <listitem>
            <para>New: Add a new Publication Type</para>

            <para>NOTE: Articles of this Publication Type will use the
            templates "<filename>user-display-[publicationtype].xd</filename>"
            and "<filename>user-summary-[publicationtype].xd</filename>" by
            default from the articles module. However, if you make your own
            modules you start making a theme. These templates then get the
            extension .xt instead of .xd and are placed in
            "<filename>/themes/yourtheme/modules/articles/</filename>" Provide
            those templates before adding new articles.</para>

            <itemizedlist>
              <listitem>
                <para>New PublicationType:</para>

                <itemizedlist>
                  <listitem>
                    <para>Type:</para>
                  </listitem>

                  <listitem>
                    <para>Description:</para>
                  </listitem>
                </itemizedlist>
              </listitem>

              <listitem>
                <para>Configuration:</para>

                <para>If the Label is empty, the field will not be
                used.</para>

                <itemizedlist>
                  <listitem>
                    <para>Field:</para>
                  </listitem>

                  <listitem>
                    <para>Label:</para>
                  </listitem>

                  <listitem>
                    <para>Format:</para>

                    <itemizedlist>
                      <listitem>
                        <para>Static text:</para>
                      </listitem>

                      <listitem>
                        <para>Text box:</para>
                      </listitem>

                      <listitem>
                        <para>Small text area:</para>
                      </listitem>

                      <listitem>
                        <para>Medium text area:</para>
                      </listitem>

                      <listitem>
                        <para>Large text area:</para>
                      </listitem>

                      <listitem>
                        <para>Username:</para>
                      </listitem>

                      <listitem>
                        <para>Calendar:</para>
                      </listitem>

                      <listitem>
                        <para>File upload:</para>
                      </listitem>

                      <listitem>
                        <para>Status:</para>
                      </listitem>

                      <listitem>
                        <para>URL:</para>
                      </listitem>

                      <listitem>
                        <para>Image:</para>
                      </listitem>

                      <listitem>
                        <para>HTML page:</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>

                  <listitem>
                    <para>Input:</para>
                  </listitem>

                  <listitem>
                    <para>Type:</para>
                  </listitem>

                  <listitem>
                    <para>Click "<guibutton>Create</guibutton>" to save
                    changes.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </listitem>

          <listitem>
            <para>Edit: Click "<guibutton>Edit</guibutton>" next to a
            Publication Type you wish to modify. On the next panel, you may
            modify the settings (as defined in New, above) for the selected
            Publication Type.</para>

            <itemizedlist>
              <listitem>
                <para>Click "<guibutton>Modify</guibutton>" to save
                changes.</para>
              </listitem>

              <listitem>
                <para>Export definition to XML: Click this link to export the
                definition of the Publication Type. On the next panel, the
                Publication Type is displayed in XML format.</para>
              </listitem>
            </itemizedlist>
          </listitem>

          <listitem>
            <para>Delete: If you wish to delete an existing Publication Type,
            click "<guibutton>Delete</guibutton>" next to the Publication Type
            you want to delete. <emphasis>Note that all articles associated
            with the selected Publication Type will be deleted if the
            Publication Type is deleted.</emphasis> The next panel asks you to
            confirm your intention to delete the Publication Type. Click
            "<guibutton>Delete</guibutton>" to confirm and the Publication
            Type is deleted.</para>
          </listitem>

          <listitem>
            <para>Article config: Click this link to go to the Article
            configuration panel for the selected Publication Type.</para>
          </listitem>

          <listitem>
            <para>View articles: Click this link to display the articles
            associated with the selected Publication Type.</para>
          </listitem>

          <listitem>
            <para>Add article: To add an article to a particular Publication
            Type, click this link next to the Publication Type to which you
            wish to add the article.</para>
          </listitem>

          <listitem>
            <para>Import definition from XML: Importing XML definitions of
            Publication Types can be done in two ways:</para>

            <orderedlist>
              <listitem>
                <para>XML-format Publication Type definition files are placed
                into the <filename>&lt;xarroot&gt;/modules/articles</filename>
                directory with appropriate ownership &amp; permissions.</para>
              </listitem>

              <listitem>
                <para>The XML definition is pasted into a text field on the
                <guibutton>Admin-&gt;Articles-&gt;Publication Types-&gt;Import
                definition from XML</guibutton> panel.</para>
              </listitem>
            </orderedlist>

            <para>If you wish to import a Publication Type in XML format,
            follow these steps:</para>

            <itemizedlist>
              <listitem>
                <para>Obtain the XML definition(s) for the Publication Type(s)
                you wish to import.</para>
              </listitem>

              <listitem>
                <para>Go to <command>Admin-&gt;Articles-&gt;Publication
                Types</command> and click "<guibutton>Import definition from
                XML</guibutton>".</para>
              </listitem>

              <listitem>
                <para>On the next panel, specify the XML to import.</para>

                <itemizedlist>
                  <listitem>
                    <para>From the drop-down list of
                    <filename>*.xml</filename> files in the
                    <filename>&lt;xarroot&gt;/modules/articles</filename>
                    directory, select the file to import.</para>
                  </listitem>

                  <listitem>
                    <para>Paste the XML-format definition into the large text
                    box.</para>
                  </listitem>
                </itemizedlist>
              </listitem>

              <listitem>
                <para>Click "<guibutton>Import</guibutton>" to import the
                Publication Type. The new Publication Type is added to your
                site.</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>

    <sect2>
      <title>EXAMPLE: New Publication Type: A Simple Guestbook for
      Xaraya</title>

      <para>A simple Guestbook can be made with the Articles module. Follow
      this example to create your own Guestbook.</para>

      <para>Go to Admin-&gt;Articles-&gt;Publication Types. Click "New
      Publication Type". On the next panel, enter the following:</para>

      <para>FIELD: title LABEL: Entry FORMAT: Medium Text Area INPUT: checked
      TYPE: string FIELD: authorid LABEL: Author FORMAT: Username INPUT:
      checked TYPE: integer FIELD: pubdate LABEL: Publication Date FORMAT:
      Calendar INPUT: checked TYPE: integer</para>

      <para>Here's the template that should be placed in
      <filename>&lt;xarroot&gt;/themes/modules/articles/user-summary-guestbook.xt</filename>:
      <literallayout>&lt;div class="xar-alt" style="margin: 0px 3px 6px 3px;padding: 1px;text-align: left;"&gt; &lt;div class="xar-norm" style="padding: 3px;"&gt;
            &lt;xar:if condition="!empty($categories) and count($categories) gt 0"&gt;
                [ &lt;xar:loop name="$categories"&gt;
                    #$cjoin# &lt;a href="#$clink#"&gt;#$cname#&lt;/a&gt;
                &lt;/xar:loop&gt; ]
            &lt;/xar:if&gt;
                                                                                                                                                             
          &lt;div class="xar-accent"&gt;
            &lt;xar:mlstring&gt;Posted by&lt;/xar:mlstring&gt;:
            &lt;b&gt;#$author#&lt;/b&gt;
            &lt;xar:mlstring&gt;on&lt;/xar:mlstring&gt;
            &lt;b&gt;#$date#&lt;/b&gt;
                    &lt;xar:if condition="!empty($counter)"&gt;
                       (#$counter# &lt;xar:mlstring&gt;Reads&lt;/xar:mlstring&gt;)
                    &lt;/xar:if&gt;
                                                                                                                                                             
          &lt;/div&gt;
          &lt;br /&gt;
          #$title#
          &lt;br /&gt;
          &lt;div class="xar-sub" align="right"&gt;
            &lt;xar:if condition="!empty($comments)"&gt;
                #$comments#
            &lt;/xar:if&gt;
          &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</literallayout></para>
    </sect2>

    <sect2>
      <title>EXAMPLE: New Publication Type: A Blogger</title>

      <para>This example will guide you through the process of adding a
      Blogger Publication Type to your Xaraya site.</para>

      <itemizedlist>
        <listitem>
          <para>WHAT IS A BLOG? WHAT IS BLOGGING?:</para>

          <para><command>blog n.: [common] Short for "weblog", an on-line
          web-zine or diary (usually with facilities for reader comments and
          discussion threads) made accessible through the World Wide
          Web.</command></para>

          <para>The term "blog" is widespread and readily forms derivatives,
          of which the best known may be "<firstterm>blogosphere</firstterm>"
          (the hyperlinked totality of all blogs and the culture surrounding
          blogs).</para>

          <para>There are tens of thousands of weblogs ("Blogs") on the
          Internet, many of them updated daily -- some of them many times a
          day. Some Blogs are public diaries while others are the
          authoritative or idiosyncratic musings of experts and cranks.</para>

          <para>"Blogging" is the process of turning one's own filter on news
          and the world into something others might want to read, link to, and
          write about themselves.</para>

          <para>Blogging is facilitated by desktop BlogTools --
          word-processor-like tools that are created to encourage frequent
          updates of a blog by providing an easy interface, specialized tools,
          and a moment's readiness -- without the need to open your
          browser.</para>
        </listitem>

        <listitem>
          <para>FILES INCLUDED WITH THIS TUTORIAL:</para>

          <para>The following files are included with this tutorial.</para>

          <para>OTTO: Move to FILES INCLUDED WITH THIS GUIDE, above, when
          complete.</para>
        </listitem>

        <listitem>
          <para>ACTIVATING NECESSARY MODULES FOR BLOGGING:</para>

          <para>In order to configure our Xaraya site for blogging, it is
          necessary to ensure that certain modules are activated. We need to
          activate at least three (and, optionally, a fourth) modules:</para>

          <itemizedlist>
            <listitem>
              <para>articles -- storage of the blog entries</para>
            </listitem>

            <listitem>
              <para>bloggerapi -- the central axis for blogging in
              Xaraya</para>
            </listitem>

            <listitem>
              <para>categories -- categorization of blogs</para>
            </listitem>

            <listitem>
              <para>comments (<emphasis>optional but recommended</emphasis>)
              -- provides site visitors the ability to comment on blog
              entries</para>
            </listitem>
          </itemizedlist>

          <para>To activate the modules, log in as Administrator and go to
          <command>Admin-&gt;Modules-&gt;View All</command>. Some of the
          modules listed above may already be active on your site. If the
          modules listed above are not shown with a Status of "Active", they
          each need to be installed by clicking
          "<guibutton>Install</guibutton>" on their line.</para>

          <para>Once you have ensured that the modules listed above are Active
          on your site, we can move forward to the next step.</para>
        </listitem>

        <listitem>
          <para>CREATING A PUBLICATION TYPE FOR THE BLOG:</para>

          <para>While not required, it is recommended that you create a
          specific Publication Type for your blog in articles configuration.
          Doing so allows us to use the site first for blogging only and
          offers the flexibility of adding additional types of content later.
          If you do not wish to create a specific Publication Type for your
          blog, simply use one of the existing Publication Types -- for
          example, "<userinput>news</userinput>".</para>

          <para>Go to <command>Admin-&gt;Articles-&gt;Publication
          Types</command>. Click "<guibutton>New</guibutton>" to begin adding
          a new Publication Type with the following values:</para>

          <graphic fileref="sourceimages/pubtype.jpg" format="JPG" width="776" />

          <para>Click "<guibutton>Create</guibutton>" to save changes.</para>
        </listitem>

        <listitem>
          <para>ADD CATEGORIES TO THE NEW PUBLICATION TYPE:</para>

          <para>Go to <command>Admin-&gt;Articles-&gt;Publication
          Types</command>. Click "<guibutton>Article Config</guibutton>" on
          the 'blog' line. At the bottom of the panel, change Number of
          possible categories to "<userinput>1</userinput>". Click
          "<guibutton>Update Configuration</guibutton>" to save
          changes.</para>

          <para>When the panel refreshes, select a category for blog entries
          from the 'Base category for articles' drop-down list. Click
          "<guibutton>Update Configuration</guibutton>" to save
          changes.</para>
        </listitem>

        <listitem>
          <para>ACTIVATING HOOKS:</para>

          <para>Go to <command>Admin-&gt;Modules-&gt;Configure
          Hooks</command>. Click on '<guibutton>categories</guibutton>', then
          CHECK 'blog'. You could CHECK 'all articles' instead of 'blog' if
          you want categories to be enabled for every article Publication
          Type. For the purpose of this tutorial, it doesn't matter which of
          the two options you choose as long as you choose one. Click
          "<guibutton>Save Changes</guibutton>" to save changes.</para>
        </listitem>

        <listitem>
          <para>LINK BLOGGERAPI TO THE BLOG PUBLICATION TYPE:</para>

          <para>This step connects the incoming data from your BlogTool to the
          correct Publication Type in Xaraya.</para>

          <para>Click <command>Admin-&gt;Bloggerapi-&gt;Modify
          config</command>. On the panel that appears, select the Publication
          Type to which you would like to point your Blog entries. Select
          'blog : Weblog on this site', which is the Publication Type we
          created in CREATING A PUBLICATION TYPE FOR THE BLOG, above, and
          click "<guibutton>Update bloggerapi Configuration</guibutton>" to
          save changes.</para>

          <para>We're now done with the Xaraya-side configuration of your
          blog. Let's move to the BlogTool configuration.</para>
        </listitem>

        <listitem>
          <para>CONFIGURING YOUR BLOGTOOL:</para>

          <para>For Windows we recommend <ulink
          url="http://www.wbloggar.com">w.bloggar</ulink>. For other operating
          systems, <ulink url="http://mozblog.mozdev.org">MozBlog</ulink> is
          the recommended tool.</para>

          <itemizedlist>
            <listitem>
              <para>Configuring w.bloggar -- <ulink
              url="http://www.wbloggar.com">http://www.wbloggar.com</ulink>:</para>

              <itemizedlist>
                <listitem>
                  <para>Download the latest version of w.bloggar from the site
                  above. Install it on any computer(s) from which you'd like
                  to be able to update your Xaraya site.</para>
                </listitem>

                <listitem>
                  <para>Start w.bloggar. A small account manager window will
                  open for you to configure the site to which you wish to send
                  the blog entries.</para>

                  <itemizedlist>
                    <listitem>
                      <para>Account: &lt;&lt;New&gt;&gt;</para>
                    </listitem>

                    <listitem>
                      <para>User: Enter the user name of a user on your Xaraya
                      site. Any blog entries made through this BlogTool will
                      be posted as this user.</para>
                    </listitem>

                    <listitem>
                      <para>Password: Enter the corresponding password for the
                      user above.</para>
                    </listitem>

                    <listitem>
                      <para>Click "<guibutton>Okay</guibutton>". You will be
                      asked if you want to create this new account. Click
                      "<guibutton>Yes</guibutton>" and you're taken to the
                      Account Properties screen.</para>
                    </listitem>

                    <listitem>
                      <para>Blog Tool: &gt;&gt;Custom&lt;&lt;</para>
                    </listitem>

                    <listitem>
                      <para>Account Alias: The display name for this account,
                      shown in the drop-down account selection list of this
                      BlogTool. "<userinput>Xaraya weblog</userinput>" is a
                      good choice, but you can enter whatever you want
                      here.</para>
                    </listitem>

                    <listitem>
                      <para>Ping Weblogs.com: If you would like a notification
                      sent to <ulink
                      url="http://www.weblogs.com">weblogs.com</ulink> each
                      time you use this BlogTool to update your site, check
                      this box.</para>
                    </listitem>

                    <listitem>
                      <para>API SERVER:</para>

                      <itemizedlist>
                        <listitem>
                          <para>Host:
                          <userinput>your.xarayaserver.com</userinput> (note:
                          Do not put "<userinput>http://</userinput>"!)</para>
                        </listitem>

                        <listitem>
                          <para>Page:
                          <userinput>ws.php?type=xmlrpc</userinput></para>
                        </listitem>

                        <listitem>
                          <para>Port: <userinput>80</userinput></para>
                        </listitem>

                        <listitem>
                          <para>HTTPS: UNCHECKED</para>
                        </listitem>

                        <listitem>
                          <para>Timeout: <userinput>30
                          seconds</userinput></para>
                        </listitem>
                      </itemizedlist>
                    </listitem>

                    <listitem>
                      <para>Click "<guibutton>OK</guibutton>" to save changes
                      and connect to your Xaraya site.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>Configuring MozBlog -- <ulink
              url="http://mozblog.mozdev.org">http://mozblog.mozdev.org</ulink>:</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </sect2>

    <sect2>
      <title>EXAMPLE: New Publication Type: A Recipe Category for
      Xaraya</title>

      <para>This advanced example shows how to create a new Publication Type
      (called Recipes) in Xaraya using Dynamic Data. We cover Dynamic Data in
      depth later in this Guide.</para>

      <orderedlist>
        <listitem>
          <para>LOG IN AS A XARAYA ADMINISTRATOR: This is done any time you
          wish to have Administrator access to your Xaraya site.</para>
        </listitem>

        <listitem>
          <para>CREATE A NEW PUBLICATION TYPE: This is done for each custom
          Publication Type you create.</para>

          <para>To create the new Publication Type, go to
          <command>Admin-&gt;Articles-&gt;Publication Types</command>. Click
          "<guibutton>New</guibutton>". Complete the fields as follows:</para>

          <itemizedlist>
            <listitem>
              <para>Type: <userinput>recipes</userinput> <emphasis>(NOTE:
              Lower case.)</emphasis></para>
            </listitem>

            <listitem>
              <para>Description: <userinput>Recipe
              Collection</userinput></para>
            </listitem>

            <listitem>
              <para>Field: title</para>

              <itemizedlist>
                <listitem>
                  <para>Label: <userinput>Recipe Title</userinput></para>
                </listitem>

                <listitem>
                  <para>Format: Text Box</para>
                </listitem>

                <listitem>
                  <para>Input: CHECKED</para>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>Field: summary</para>

              <itemizedlist>
                <listitem>
                  <para>Label: <userinput>Description</userinput></para>
                </listitem>

                <listitem>
                  <para>Format: Small Text Area</para>
                </listitem>

                <listitem>
                  <para>Input: CHECKED</para>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>Field: bodytext</para>

              <itemizedlist>
                <listitem>
                  <para>Label: <userinput>Ingredients</userinput></para>
                </listitem>

                <listitem>
                  <para>Format: Large Text Area</para>
                </listitem>

                <listitem>
                  <para>Input: CHECKED</para>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>Field: bodyfile</para>

              <itemizedlist>
                <listitem>
                  <para>Label: <userinput>(this field should be
                  blank)</userinput></para>
                </listitem>

                <listitem>
                  <para>Format: (as long as Label, above, is blank and Input,
                  below is UNCHECKED, it does not matter what this field
                  contains)</para>
                </listitem>

                <listitem>
                  <para>Input: UNCHECKED</para>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>Field: notes</para>

              <itemizedlist>
                <listitem>
                  <para>Label: <userinput>Instructions</userinput></para>
                </listitem>

                <listitem>
                  <para>Format: Large Text Area</para>
                </listitem>

                <listitem>
                  <para>Input: CHECKED</para>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>Do not modify the last 3 fields (authorid, pubdate, and
              status); leave them as they are.</para>
            </listitem>

            <listitem>
              <para>Click "<guibutton>Create</guibutton>" to save
              changes.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>ENABLE DYNAMIC DATA FOR ARTICLES/RECIPES: This is done for
          each custom Publication Type using Dynamic Data you create, unless
          Dynamic Data has previously been enabled for the module.</para>

          <para>To enable Dynamic Data for a Publication Type, go to
          <command>Admin-&gt;Modules-&gt;Configure Hooks</command>. We want to
          enable Dynamic Data within Articles, so click
          "<guibutton>dynamicdata</guibutton>" and CHECK the box for Articles
          and the 'Recipe Collection' sub-category under Articles. Click
          "<guibutton>Save Changes</guibutton>".</para>
        </listitem>

        <listitem>
          <para>ADD DYNAMIC DATA FIELD(S) TO THE NEW PUBLICATION TYPE: This is
          done for each custom Publication Type using Dynamic Data you
          create.</para>

          <para>To add dynamic data field(s) to the new publication type, go
          to <command>Admin-&gt;Articles-&gt;Publication Types</command>. Find
          the 'recipes' Publication Type that we created in CREATE A NEW
          PUBLICATION TYPE, above, and click Article Config next to it. Near
          the bottom of the next screen, you'll see "Dynamic Data Fields
          [modify]". Click "<guibutton>[modify]</guibutton>" and in the new
          window that opens, enter the Dynamic Data as follows:</para>

          <itemizedlist>
            <listitem>
              <para>Label: <userinput>photo</userinput> <emphasis>(NOTE: Lower
              case.)</emphasis></para>
            </listitem>

            <listitem>
              <para>Property Type: Image</para>
            </listitem>

            <listitem>
              <para>Data Source: <userinput>dynamic_data</userinput></para>
            </listitem>

            <listitem>
              <para>Status: Active</para>
            </listitem>
          </itemizedlist>

          <para>Click "<guibutton>Update Properties</guibutton>" to save
          changes. Close the window and return to the previous browser window
          for the rest of the steps.</para>
        </listitem>

        <listitem>
          <para>ADD A NEW CATEGORY (AND OPTIONAL SUB-CATEGORIES) FOR THE NEW
          PUBLICATION TYPE.</para>

          <para>To add the new category (and optional sub-categories), go to
          <command>Admin-&gt;Categories</command>. Click "<guibutton>Add
          Category</guibutton>" to add a new Category. For this
          example:</para>

          <para>Create a new Category called "<userinput>Recipes
          Category</userinput>" by following the steps below:</para>

          <itemizedlist>
            <listitem>
              <para>Name: <userinput>Recipes Category</userinput></para>
            </listitem>

            <listitem>
              <para>Description: <userinput>This is the recipes category for
              this site.</userinput></para>
            </listitem>

            <listitem>
              <para>In relation to this category: Generic1</para>
            </listitem>

            <listitem>
              <para>Position: Right before, in the same level</para>
            </listitem>

            <listitem>
              <para>Optional image:
              <filename>categoryrecipes_top.jpg</filename></para>
            </listitem>

            <listitem>
              <para>Click "<guibutton>Add</guibutton>" to add the new
              category.</para>
            </listitem>
          </itemizedlist>

          <para>Create three sub-categories: "<userinput>Appetizers &amp;
          Soups</userinput>", "<userinput>Breads &amp; Baked
          Goods</userinput>", and finally "<userinput>Desserts</userinput>".
          To create the "<userinput>Appetizers &amp; Soups</userinput>"
          sub-category, click "<guibutton>Add Category</guibutton>" and follow
          these steps:</para>

          <itemizedlist>
            <listitem>
              <para>Name: <userinput>Appetizers &amp; Soups</userinput></para>

              <itemizedlist>
                <listitem>
                  <para>Description: <userinput>Soups and Appetizer recipes go
                  here.</userinput></para>
                </listitem>

                <listitem>
                  <para>In relation to this category: Recipes Category</para>
                </listitem>

                <listitem>
                  <para>Position: The first child category</para>
                </listitem>

                <listitem>
                  <para>Optional image:
                  <filename>categorysoups.jpg</filename></para>
                </listitem>

                <listitem>
                  <para>Click "<guibutton>Add</guibutton>" to add the new
                  category.</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>

          <para>To create the next two sub-categories, click "<guibutton>Add
          Category</guibutton>" and follow these steps:</para>

          <itemizedlist>
            <listitem>
              <para>Name: Breads &amp; Baked Goods</para>

              <itemizedlist>
                <listitem>
                  <para>Description: <userinput>Breads &amp; baked goods
                  recipes go here.</userinput></para>
                </listitem>

                <listitem>
                  <para>In relation to this category: Recipes Category /
                  Appetizers &amp; Soups</para>
                </listitem>

                <listitem>
                  <para>Position: Right after, in the same level</para>
                </listitem>

                <listitem>
                  <para>Optional image:
                  <filename>categorybaked.jpg</filename></para>
                </listitem>

                <listitem>
                  <para>Click "<guibutton>Add</guibutton>" to add the new
                  category.</para>
                </listitem>
              </itemizedlist>
            </listitem>

            <listitem>
              <para>Create another sub-category, typing
              "<userinput>Desserts</userinput>" in the Name field,
              "<userinput>Dessert recipes go here</userinput>" for the
              Description, and "<filename>categorydesserts.jpg</filename>" as
              the image.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>ADD THE NEW PUBLICATION TYPE TO A CATEGORY: This is done for
          each custom Publication Type you create.</para>

          <para>To add Publication Types to Categories, go to
          <command>Admin-&gt;Articles-&gt;Modify config</command> and click on
          the description of the Publication Type we created (in this example,
          it's "<userinput>Recipe Collection</userinput>"). Scroll down, and
          you'll see:</para>

          <itemizedlist>
            <listitem>
              <para>Number of possible categories: 0. Change the "0" to
              "<userinput>1</userinput>".</para>
            </listitem>

            <listitem>
              <para>Click "<guibutton>Update Configuration</guibutton>" to
              save changes.</para>
            </listitem>
          </itemizedlist>

          <para>After the screen refreshes, scroll to the bottom of the center
          section and select the Category for the new Publication Type. In
          this example, if it's not already selected, select
          "<userinput>Recipes Category</userinput>" that we created above.
          Click "<guibutton>Update Configuration</guibutton>" to save
          changes.</para>
        </listitem>

        <listitem>
          <para>CONFIGURE THE NEW PUBLICATION TYPE: This is done for each
          custom Publication Type you create.</para>

          <para>Still in <command>Admin-&gt;Articles-&gt;Modify
          config</command>, click on the description of the publication type
          we just created (in this example, it's "<userinput>Recipe
          Collection</userinput>"). Make the following changes (NOTE: Items
          enclosed in parenthesis below are the names of the variables used in
          templates.):</para>

          <itemizedlist>
            <listitem>
              <para>Use 'recipes' as alias in short URLs: CHECKED</para>
            </listitem>

            <listitem>
              <para>Default start view: Browse in Recipes Category</para>
            </listitem>

            <listitem>
              <para>Number of columns ($numcols):
              <userinput>1</userinput></para>
            </listitem>

            <listitem>
              <para>Items per page ($number): <userinput>10</userinput></para>
            </listitem>

            <listitem>
              <para>Show category links in article summaries ($categories):
              CHECKED</para>
            </listitem>

            <listitem>
              <para>Show previous/next category ($showprevnext):
              CHECKED</para>
            </listitem>

            <listitem>
              <para>Show number of comments ($comments): CHECKED</para>
            </listitem>

            <listitem>
              <para>Show hit counts ($counter): CHECKED</para>
            </listitem>

            <listitem>
              <para>Show ratings ($rating): CHECKED</para>
            </listitem>

            <listitem>
              <para>Show links to publication types ($showpublinks +
              includes/publinks.xd): CHECKED</para>
            </listitem>

            <listitem>
              <para>Show link to archives ($archivelink + $archivelabel):
              CHECKED</para>
            </listitem>

            <listitem>
              <para>Show link to article map ($maplink + $maplabel):
              CHECKED</para>
            </listitem>

            <listitem>
              <para>Call transform hooks in summaries: UNCHECKED</para>
            </listitem>

            <listitem>
              <para>Show link to previous/next article in display ($prevart +
              $nextart): CHECKED</para>
            </listitem>

            <listitem>
              <para>Click "<guibutton>Update Configuration</guibutton>" to
              save changes.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>ADD TEMPLATES FOR THE NEW PUBLICATION TYPE: This should be
          done for each custom Publication Type you create.</para>

          <para>We can create up to three custom display templates to tell
          Xaraya specifically how to display this new Publication Type.
          Example files are included in this tutorial distribution. Download
          them from the website: <ulink
          url="http://www.xaraya.com/documentation/userguide/examples/Xar-PubType.zip">http://www.xaraya.com/documentation/userguide/examples/Xar-PubType.zip</ulink>
          If you do not create a template, Xaraya will attempt to display the
          Publication Type using a default template and show you a
          warning.</para>

          <para>Template files shipped with a module are placed into the
          <filename>&lt;xarroot&gt;/modules/articles/xartemplates</filename>
          directory, and are called
          '<filename>user-display-&lt;pubtype&gt;.xd</filename>',
          '<filename>user-summary-&lt;pubtype&gt;.xd</filename>', and
          (optionally) '<filename>user-view-&lt;pubtype&gt;.xd</filename>',
          where <varname>&lt;pubtype&gt;</varname> is the name of the
          Publication Type. When you create templates yourself your are
          strongly advised to use the Xaraya template overrides. This works
          simple. You will place your own templates in
          <filename>&lt;xarroot&gt;/themes/&lt;yourtheme&gt;/modules/articles/</filename>
          Note that we do not use the xartemplates directory in there.
          Templates placed in the themes directory get the extension xt
          instead of .xd. This is done for clarity. In this tutorial,
          <varname>&lt;pubtype&gt;</varname> is
          "<userinput>recipes</userinput>" as created in step #2 above and we
          will place these in the Xaraya_Classic theme:</para>

          <itemizedlist>
            <listitem>
              <para>user-display-recipes.xt -- this is the main view of the
              data</para>
            </listitem>

            <listitem>
              <para>user-summary-recipes.xt -- this is a summary view of the
              data</para>
            </listitem>

            <listitem>
              <para>user-view-recipes.xt <emphasis>(optional)</emphasis>
              --</para>
            </listitem>
          </itemizedlist>

          <para>It is recommended that you begin by examining the example
          files included with this tutorial, or open one of the sample
          templates provided with Xaraya and make changes as necessary using
          your favorite HTML editor. Where ever you want to display the fields
          in the new Publication Type, enter
          "<userinput>#$fieldname#</userinput>" (no quotes) in the template.
          Xaraya will replace "<userinput>#$fieldname#</userinput>" with the
          contents of the field as stored in the database. In this tutorial,
          we created the following fields, which are available for display in
          the template using the <userinput>#$fieldname#</userinput> indicated
          in parenthesis:</para>

          <itemizedlist>
            <listitem>
              <para>title (#$title#)</para>
            </listitem>

            <listitem>
              <para>summary (#$summary#)</para>
            </listitem>

            <listitem>
              <para>bodytext (#$bodytext#)</para>
            </listitem>

            <listitem>
              <para>notes (#$notes#)</para>
            </listitem>

            <listitem>
              <para>photo (#$photo#)</para>
            </listitem>
          </itemizedlist>

          <para>The templates included with this tutorial distribution expect
          to find a file called "<filename>NoPhoto.gif</filename>" in the
          <filename>&lt;xarroot&gt;/images/recipes</filename> directory of
          your website. This file is displayed if a Photograph URL is not
          provided in the article submission, and is included with this
          tutorial distribution. Copy <filename>NoPhoto.gif</filename> to the
          <filename>&lt;xarroot&gt;/images/recipes</filename> directory,
          creating directories as necessary.</para>
        </listitem>

        <listitem>
          <para>ADD AN ARTICLE TO THE NEW PUBLICATION TYPE: This is done for
          each custom Publication Type you create.</para>

          <para>Now articles can be added to the new publication type. Click
          <command>Admin-&gt;Articles-&gt;Add Article</command> and click on
          the name of the new Publication Type (in this example, it's Recipe
          Collection). A sample recipe is included with this tutorial
          (<filename>SampleRecipe.txt</filename>).</para>

          <para>Enter the Recipe Title, Description, Ingredients, Directions,
          and a URL for the photograph for the recipe. Select the appropriate
          Category for the recipe, and click "<guibutton>Preview</guibutton>"
          to see what the recipe will look like, or click "<guibutton>Add
          Article</guibutton>" to save it.</para>

          <para>On the following panel, approve the article by putting a CHECK
          in the STATUS box, and selecting "<guibutton>Approved</guibutton>"
          from the drop-down list at the bottom of the panel. Click
          "<guibutton>Change Status</guibutton>" to save changes.</para>
        </listitem>

        <listitem>
          <para>LOGOUT FROM THE ADMINISTRATOR ACCOUNT</para>

          <para>It is a wise idea, though technically not required, to log out
          of your administrator account at the end of each session. To log out
          of your Xaraya administrator account, click <guibutton>[admin
          logout]</guibutton>, which appears at the bottom of the
          Administration menu. Confirm your intention to log out on the next
          panel by clicking "<guibutton>Logout</guibutton>", or click
          "<guibutton>Cancel</guibutton>" to abort the logout.</para>
        </listitem>
      </orderedlist>
    </sect2>

    <sect2>
      <title>KNOWLEDGE REVIEW: Publication Types</title>

      <para>OTTO:</para>
    </sect2>
  </sect1>
</chapter>